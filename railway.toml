# ===========================================
# Railway Configuration File
# https://docs.railway.app/reference/config-as-code
# ===========================================

# Build settings
[build]
# Use Dockerfile for building
builder = "dockerfile"
# Path to Dockerfile (default: ./Dockerfile)
dockerfilePath = "./Dockerfile"

# Deploy settings
[deploy]
# Number of replicas (1 for free tier)
numReplicas = 1

# Start command (optional, Dockerfile CMD is used if not set)
# startCommand = "node dist/index.js"

# Restart policy
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Healthcheck configuration
[deploy.healthcheck]
# Path to check for HTTP healthcheck
path = "/health"
# Port to check (default: $PORT)
port = 8080
# Timeout for healthcheck request
timeout = 10
# Interval between healthchecks
interval = 30
# Number of consecutive failures before marking unhealthy
unhealthyThreshold = 3
# Number of consecutive successes before marking healthy
healthyThreshold = 1

